<% include ../partials/header %>
<div class="container">
    
    <header id="header">
        <div class="container">
			<h1><strong>Texas Living...</strong> Ericas' Way!</h1>
			<span></span>
			<% if(currentUser && currentUser.isAdmin){ %>
            <p>
            <a href="/posts/new" class="button primary" >Add New Posts</a>
            </p>
            <% } %>
		</div>
	</header>
<div>
    <h2>Check out my most recent posts...</h2>
</div>
<div>
 <p>
         
</p>   
</div>
    <div class="row text-center" style="display:flex; flex-wrap: wrap">
        <% posts.forEach(function(post){ %>
            <div class="col-md-3 col-sm-6">
                <div class="thumbnail">
                    <img src="<%= post.image.url %>">
                    <div class="caption">
                    <h4><%= post.name %>- <em><%= moment(post.createdAt).format("M/D/Y") %></em></h4>
                    <div class="description">
                       <p><%- post.description.substring(0, 75) %></p> 
                    </div>
                    </div>
                    <p>
                        <a class="button primary" href="/posts/<%= post._id %>">Read More...</a>
                    </p>
                </div>
            </div> 
        <% }); %> 
        </div>
    </div>
    
</div>
<nav>
    <div class="container">
        <div class="row text-center">
            <div class="col-md-12" style="margin: 0 auto;">
                <% if (pages && pages > 0) { %>
                <ul class="pagination pagination-sm">
                    <% if (current == 1) { %>
                    <li class="disabled"><a>First</a></li>
                    <% } else { %>
                    <li><a href="/posts">First</a></li>
                    <% } %>
                
                    <% if (current == 1) { %>
                    <li class="disabled"><a>«</a></li>
                    <% } else { %>
                    <li><a href="/posts?page=<%= Number(current) - 1 %>">«</a></li>
                    <% } %>
                
                    <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
                    <% if (i !== 1) { %>
                    <li><a>...</a></li>
                    <% } %>
                    <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                    <% if (i == current) { %>
                    <li><a><%= i %></a></li>
                    <% } else { %>
                    <li><a href="/posts?page=<%= i %>"><%= i %></a></li>
                    <% } %>
                    <% if (i == Number(current) + 4 && i < pages) { %>
                    <li class="disabled"><a>...</a></li>
                    <% } %>
                    <% } %>
                
                    <% if (current == pages) { %>
                    <li class="disabled"><a>»</a></li>
                    <% } else { %>
                    <li><a href="/posts?page=<%= Number(current) + 1 %>">»</a></li>
                    <% } %>
                
                    <% if (current == pages) { %>
                    <li class="disabled"><a>Last</a></li>
                    <% } else { %>
                    <li><a href="/posts?page=<%= pages %>">Last</a></li>
                    <% } %>
                </ul>
                <% } %>
            </div>
        </div>
    </div>
</nav>






<% include ../partials/footer %>